<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GA4 Add to Cart Demo</title>
</head>
<body>
    <h1>GA4 Add to Cart Event Example</h1>
    <div id="product-list">
        <!-- Example Product -->
        <div class="product" id="product-1" data-name="Product A" data-id="12345" data-price="29.99" data-category="Electronics">
            <h2>Product A</h2>
            <p>Price: $29.99</p>
            <button class="add-to-cart" onclick="addToCart('product-1')">Add to Cart</button>
        </div>
    </div>

    <!-- Google Tag Manager -->
    <script>
        (function(w, d, s, l, i) {
            w[l] = w[l] || [];
            w[l].push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });
            var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s),
                dl = l !== 'dataLayer' ? '&l=' + l : '';
            j.async = true;
            j.src = 'https://www.googletagmanager.com/gtm.js?id=' + i + dl;
            f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-PPBVCLNF');
    </script>
    <!-- End Google Tag Manager -->

    <!-- Add to Cart Script -->
    <script>
        window.dataLayer = window.dataLayer || [];

        function addToCart(productId) {
            const productElement = document.getElementById(productId);
            const productName = productElement.getAttribute('data-name');
            const productIdValue = productElement.getAttribute('data-id');
            const productPrice = parseFloat(productElement.getAttribute('data-price'));
            const productCategory = productElement.getAttribute('data-category');

            // Push the "add_to_cart" event to the dataLayer
            window.dataLayer.push({
                event: 'add_to_cart',
                ecommerce: {
                    items: [{
                        item_name: productName,
                        item_id: productIdValue,
                        price: productPrice,
                        item_category: productCategory,
                        quantity: 1
                    }]
                }
            });

            alert(`Added ${productName} to the cart!`);
        }
    </script>
</body>
</html>
