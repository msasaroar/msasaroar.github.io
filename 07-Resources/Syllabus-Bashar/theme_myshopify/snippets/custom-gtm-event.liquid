<script>
  document.addEventListener('pointerdown', function(event) {
    console.log('target', event.target);
    var wishListIcon = event.target.closest('product-list .wishlist-icon.heart'); //null, el: .wishlist-ico .heart
    
    if(wishListIcon) {
      var productItemEl = wishListIcon.closest('.product-item'); 
      var productTitleEl = productItemEl.querySelector('.product-item-meta__title');
      var prodcutTitle = productTitleEl ? productTitleEl.innerText: undefined;

      console.log('product title', productTitleEl.innerText);
        
      Shopify.analytics.publish('add_to_wishlist', {
        productName: prodcutTitle
      });
    }
  });
  
</script>
