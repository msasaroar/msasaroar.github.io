<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Google Analytics 4</title>

  <!-- Google Tag Manager (GTM-MB72WSHR) -->
  <script>
    (function (w, d, s, l, i) {
      w[l] = w[l] || [];
      w[l].push({ "gtm.start": new Date().getTime(), event: "gtm.js" });
      var f = d.getElementsByTagName(s)[0],
        j = d.createElement(s),
        dl = l != "dataLayer" ? "&l=" + l : "";
      j.async = true;
      j.src = "https://www.googletagmanager.com/gtm.js?id=" + i + dl;
      f.parentNode.insertBefore(j, f);
    })(window, document, "script", "dataLayer", "GTM-MB72WSHR");
  </script>

  <style>

    /* BODY */
    body {
      background-color: white;
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      text-align: center;
    }

    /* MAIN CONTAINER */
    main {
      padding: 100px 20px 40px; /* padding-top for fixed header */
      max-width: 900px;
      margin: auto;
      background: white;
      border-radius: 8px;
      box-shadow: 0 0 8px rgba(0, 0, 0, 0.1);
      border: 1px solid #ddd;
      text-align: left;
      color: #333;
    }

    h2 {
      color: green;
      margin-bottom: 20px;
      text-align: center;
    }

    .row {
      display: flex;
      justify-content: space-between;
      gap: 20px;
      margin-bottom: 20px;
    }

    .column {
      flex: 1;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 6px;
      border: 1px solid #ddd;
    }

    table.data-table {
      width: 100%;
      border-collapse: collapse;
      margin-bottom: 15px;
    }

    table.data-table th,
    table.data-table td {
      border: 1px solid #ddd;
      padding: 5px;
      text-align: left;
    }

    table.data-table th {
      background-color: green;
      color: black;
    }

    .item-section {
      margin-top: 20px;
      background: #f9f9f9;
      padding: 15px;
      border-radius: 6px;
      border: 1px solid #ddd;
    }

  </style>
  <link rel="stylesheet" href="GA4-global-style.css">

</head>
<body>
  <!-- Google Tag Manager (noscript) for GTM-MB72WSHR -->
  <noscript
    ><iframe
      src="https://www.googletagmanager.com/ns.html?id=GTM-MB72WSHR"
      height="0"
      width="0"
      style="display: none; visibility: hidden"
    ></iframe
  ></noscript>

  <!-- HOME BUTTON -->
  <a href="index.html" class="home-button">Home</a>

  <!-- HEADER -->
  <header>Recommanded Event | refund</header>

  <!-- MAIN CONTENT -->
  <main>
    <div class="row">
      <!-- Left Column: Refund Info -->
      <div class="column">
        <table class="data-table">
          <tr><th>Parameter</th><th>Value</th></tr>
          <tr><td>event</td><td>refund</td></tr>
          <tr><td>transaction_id</td><td>TXN123456</td></tr>
          <tr><td>value</td><td>199.99</td></tr>
          <tr><td>currency</td><td>USD</td></tr>
          <tr><td>refund_reason</td><td>Customer Return</td></tr>
        </table>
      </div>

      <!-- Right Column: Additional Info -->
      <div class="column">
        <table class="data-table">
          <tr><th>Parameter</th><th>Value</th></tr>
          <tr><td>shipping_cost</td><td>5.99</td></tr>
          <tr><td>tax</td><td>15.99</td></tr>
          <tr><td>coupon</td><td>SUMMER2024</td></tr>
        </table>
      </div>
    </div>

    <!-- Items Section -->
    <div class="item-section">
      <h3>Refunded Items</h3>
      <table class="data-table">
        <tr>
          <th>Item Name</th>
          <th>Item ID</th>
          <th>Price</th>
          <th>Quantity</th>
          <th>Category</th>
          <th>Brand</th>
        </tr>
        <tr>
          <td>Nike Running Shoes</td>
          <td>SKU12345</td>
          <td>$99.99</td>
          <td>1</td>
          <td>Shoes</td>
          <td>Nike</td>
        </tr>
        <tr>
          <td>Adidas T-Shirt</td>
          <td>SKU67890</td>
          <td>$50.00</td>
          <td>2</td>
          <td>Clothing</td>
          <td>Adidas</td>
        </tr>
      </table>
    </div>

    <button id="trackRefund">Track The Event</button>
  </main>

  <script>
    // Function to generate a unique transaction_id
    function generateTransactionId() {
      const timestamp = Math.floor(Date.now() / 1000)
        .toString()
        .padStart(10, "0"); // 10 digits
      const randomPart = Math.floor(Math.random() * 1000)
        .toString()
        .padStart(3, "0"); // 3 digits
      return "REFUND|" + timestamp + "|" + randomPart;
    }

    document.getElementById("trackRefund").addEventListener("click", function () {
      const uniqueTransactionId = generateTransactionId();

      window.dataLayer = window.dataLayer || [];
      window.dataLayer.push({
        event: "refund",
        ecommerce: {
          transaction_id: uniqueTransactionId,
          value: 199.99,
          currency: "USD",
          refund_reason: "Customer Return",
          shipping_cost: 5.99,
          tax: 15.99,
          coupon: "SUMMER2024",
          items: [
            {
              item_name: "Nike Running Shoes",
              item_id: "SKU12345",
              price: 99.99,
              quantity: 1,
              item_category: "Shoes",
              item_brand: "Nike",
            },
            {
              item_name: "Adidas T-Shirt",
              item_id: "SKU67890",
              price: 50.0,
              quantity: 2,
              item_category: "Clothing",
              item_brand: "Adidas",
            },
          ],
        },
      });
      alert("GA4 Refund event fired with Transaction ID: " + uniqueTransactionId);
    });
  </script>
  <script src="../main.js"></script>
</body>
</html>
